"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var productForm=document.getElementById("form"),infoSection=document.getElementById("info"),productNameInput=document.getElementById("form__productInput"),productQtyInput=document.getElementById("form__qtyInput"),productPriceInput=document.getElementById("form__priceInput"),productIdInput=document.getElementById("product__id__input"),infoBtn=document.getElementById("info__btn"),addProductBtn=document.getElementById("add__product__btn"),addProductBtnImg=document.getElementById("add__product__img"),cancelFormBtn=document.getElementById("cancel__btn"),removeProductsBtn=document.getElementById("remove__products__btn"),productListContainer=document.getElementById("productListContainer"),productList=document.getElementById("productList"),productId=0,totalPaymentNumber=document.getElementById("total__payment"),Calculator=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"calculateProductSubtotal",value:function(t,e){return t*e}},{key:"sumSubtotals",value:function(){var t=Array.from(document.querySelectorAll(".productListItem__subtotal")).reduce(function(t,e){return t+parseFloat(e.textContent)},0);totalPaymentNumber.textContent="float"==typeof t?t.toFixed(2):t}},{key:"showInfo",value:function(){infoSection.classList.toggle("is__showing")}}]),t}(),Product=function(){function t(e,o,n){_classCallCheck(this,t),this.productName=e,this.productQty=o,this.productPrice=n}return _createClass(t,[{key:"addProductToList",value:function(){productId++,productList.innerHTML+='\n\t\t\t<li class="productListItem" data-id="'.concat(productId,'">\n\t\t\t\t<div class="productListItemInfo">\n\t\t\t\t\t<span class="productListItem__name">').concat(this.productName,'</span>\n\t\t\t\t\t<span class="productListItem__subtotal">').concat(Calculator.calculateProductSubtotal(this.productQty,this.productPrice),'</span>\n\t\t\t\t\t<span class="productListItem__qty">Cantidad: <span class="productListItem__qty__number">').concat(this.productQty,'</span></span>\n\t\t\t\t\t<span class="productListItem__price">Precio Unit.: <span class="productListItem__price__number">').concat(this.productPrice,'</span></span>\n\t\t\t\t</div>\n\t\t\t\t<button class="btnReset productListItem__btn btn__edit js__edit__product__btn">\n\t\t\t\t\t<img src="./icons/edit.svg" alt="editar producto" class="form__btn__icon">\n\t\t\t\t</button>\n\t\t\t\t<button class="btnReset productListItem__btn btn__remove js__remove__product__btn">\n\t\t\t\t\t<img src="./icons/remove.svg" alt="remover producto" class="form__btn__icon">\n\t\t\t\t</button>\n\t\t\t</li>'),removeProductsBtn.disabled=!1}},{key:"updateProduct",value:function(t){var e=document.querySelector('li[data-id="'.concat(t,'"]'));null!==e&&(e.querySelector(".productListItem__name").textContent=this.productName,e.querySelector(".productListItem__subtotal").textContent=Calculator.calculateProductSubtotal(this.productQty,this.productPrice),e.querySelector(".productListItem__qty__number").textContent=this.productQty,e.querySelector(".productListItem__price__number").textContent=this.productPrice,addProductBtnImg.src="./icons/cart.svg")}}],[{key:"removeProduct",value:function(t){productList.removeChild(t)}},{key:"getProductListItemInfo",value:function(t){return{productNameEl:t.querySelector(".productListItem__name"),productQtyEl:t.querySelector(".productListItem__qty__number"),productPriceEl:t.querySelector(".productListItem__price__number"),productItemId:t.dataset.id}}},{key:"editProduct",value:function(t){var e=this.getProductListItemInfo(t);productNameInput.value=e.productNameEl.textContent,productQtyInput.value=e.productQtyEl.textContent,productPriceInput.value=e.productPriceEl.textContent,productIdInput.value=e.productItemId,addProductBtnImg.src="./icons/check.svg"}},{key:"cleanProductInputValues",value:function(){productNameInput.value="",productQtyInput.value="",productPriceInput.value="",productIdInput.value=""}},{key:"resetProductList",value:function(){productList.innerHTML="",totalPaymentNumber.textContent=0,removeProductsBtn.disabled=!0,productListContainer.classList.add("empty")}}]),t}();productForm.addEventListener("submit",function(t){t.preventDefault(),productListContainer.classList.remove("empty");var e=new Product(productNameInput.value,parseFloat(productQtyInput.value),parseFloat(productPriceInput.value)),o=productIdInput.value;void 0===o||""===o?e.addProductToList():e.updateProduct(o),Product.cleanProductInputValues(),Calculator.sumSubtotals()}),removeProductsBtn.addEventListener("click",function(){Product.resetProductList(),Product.cleanProductInputValues()}),productList.addEventListener("click",function(t){var e,o=t.target;(o.classList.contains("js__remove__product__btn")||o.classList.contains("js__edit__product__btn"))&&(e=o.parentElement),"remover producto"!==o.getAttribute("alt")&&"editar producto"!==o.getAttribute("alt")||(e=o.parentElement.parentElement),(o.classList.contains("js__remove__product__btn")||"remover producto"===o.getAttribute("alt"))&&(Product.removeProduct(e),Calculator.sumSubtotals(),productList.children.length<1&&Product.resetProductList()),(o.classList.contains("js__edit__product__btn")||"editar producto"===o.getAttribute("alt"))&&Product.editProduct(e)}),cancelFormBtn.addEventListener("click",function(){Product.cleanProductInputValues(),addProductBtnImg.src="./icons/cart.svg"}),infoBtn.addEventListener("click",function(){Calculator.showInfo()});